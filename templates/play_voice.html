{% extends "base.html" %}
{% block content %}
<div class="container py-5" style="max-width: 700px;">
  <div class="bg-dark p-4 rounded-4 text-center shadow-lg">
    <h2 class="gradient-text mb-4"><i class="bi bi-megaphone-fill me-2"></i>Voice Message</h2>

    <audio id="voicePlayer" controls controlsList="nodownload" style="width: 100%;">
        <source src="{{ url_for('static', filename='voices/' + voice_file) }}" type="audio/webm">
        Your browser does not support the audio element.
    </audio>   

    <div class="alert alert-info mt-3">
      <i class="bi bi-headphones me-1"></i> {{ views_remaining }} listens remaining
    </div>

    <div class="mt-3">
      <a href="{{ url_for('my_messages') }}" class="btn btn-outline-light">Back to My Messages</a>
    </div>
  </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
      const audio = document.getElementById('voicePlayer');
      if (audio) {
        audio.setAttribute('controlsList', 'nodownload');
      }
    });
  </script>
  
{% endblock %}
